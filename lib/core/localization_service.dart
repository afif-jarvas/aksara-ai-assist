import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

// --- Providers ---
final localeProvider = StateProvider<Locale>((ref) => const Locale('id'));
final fontSizeProvider = StateProvider<double>((ref) => 1.0);
final fontFamilyProvider = StateProvider<String>((ref) => 'Plus Jakarta Sans');
final themeProvider = StateNotifierProvider<ThemeNotifier, ThemeMode>((ref) => ThemeNotifier());

class ThemeNotifier extends StateNotifier<ThemeMode> {
  ThemeNotifier() : super(ThemeMode.system);
  void toggleTheme() {
    state = state == ThemeMode.dark ? ThemeMode.light : ThemeMode.dark;
  }
}

String tr(WidgetRef ref, String key) {
  final locale = ref.watch(localeProvider).languageCode;
  return _localizedValues[locale]?[key] ?? key;
}

const Map<String, Map<String, String>> _localizedValues = {
  'id': {
    'hello': 'Halo,',
    'explore': 'Jelajahi Fitur',
    'home': 'Beranda',
    'history': 'Riwayat',
    'profile': 'Profil',
    'settings': 'Pengaturan',
    'about_app': 'Tentang Aplikasi',
    'privacy': 'Kebijakan Privasi',
    'language': 'Bahasa',
    'feedback': 'Beri Masukan',
    'logout': 'Keluar',
    'delete_account': 'Hapus Akun',
    'cancel': 'Batal',
    'save': 'Simpan',
    'edit_name': 'Ubah Nama',
    'name_hint': 'Masukkan nama baru',
    'notif_name_desc': 'Nama profil berhasil diperbarui',
    'notif_photo_desc': 'Foto profil berhasil diperbarui',
    'no_notif': 'Belum ada notifikasi',
    'assist_title': 'Aksara Assistant',
    'assist_intro': 'Ada yang bisa saya bantu?',
    'assist_hint': 'Ketik pesan...',
    'mode_expert': 'Pakar',
    'mode_fast': 'Cepat',
    'mode_switched': 'Mode beralih ke:',
    'feat_face': 'Pengenalan Wajah',
    'desc_face': 'Identifikasi wajah real-time',
    'feat_ocr': 'Pemindaian Teks',
    'desc_ocr': 'Ekstrak teks dari gambar',
    'feat_music': 'Aksara Music',
    'desc_music': 'Buat musik dengan AI',
    'feat_obj': 'Deteksi Objek',
    'desc_obj': 'Kenali benda sekitar',
    'feat_qr': 'QR Scanner',
    'desc_qr': 'Pindai kode QR',
    'appearance': 'TAMPILAN',
    'dark_mode': 'Mode Gelap',
    'font_style': 'Gaya Huruf',
    'font_size': 'Ukuran Huruf',
    'system_data': 'SISTEM & DATA',
    'clear_cache': 'Bersihkan Cache',
    'cache_desc': 'Hapus data sementara',
    'cache_cleared': 'Cache berhasil dibersihkan!',
    'app_version': 'Versi Aplikasi',
    'select_language': 'Pilih Bahasa',
    'history_title': 'Riwayat Aktivitas',
    'no_history': 'Belum ada aktivitas',
    'scan_ocr': 'Pemindaian Teks (OCR)',
    'det_obj': 'Deteksi Objek',
    'rec_face': 'Pengenalan Wajah',
    'chat_ai': 'Chatbot Assistant',
    'scan_qr': 'Pemindaian QR Code',
    'login_act': 'Login Masuk',
    'gen_music': 'Pembuatan Musik AI',
    'desc_act_assist': 'Percakapan dengan AI',
    'desc_act_ocr': 'Konversi gambar ke teks',
    'desc_act_face': 'Verifikasi wajah pengguna',
    'desc_act_obj': 'Analisis objek visual',
    'desc_act_qr': 'Membaca kode QR',
    'desc_act_default': 'Aktivitas sistem',
  },
  'en': {
    'hello': 'Hello,',
    'explore': 'Explore Features',
    'home': 'Home',
    'history': 'History',
    'profile': 'Profile',
    'settings': 'Settings',
    'about_app': 'About App',
    'privacy': 'Privacy Policy',
    'language': 'Language',
    'feedback': 'Feedback',
    'logout': 'Logout',
    'delete_account': 'Delete Account',
    'cancel': 'Cancel',
    'save': 'Save',
    'edit_name': 'Edit Name',
    'name_hint': 'Enter new name',
    'notif_name_desc': 'Name updated successfully',
    'notif_photo_desc': 'Photo updated successfully',
    'no_notif': 'No notifications',
    'assist_title': 'Aksara Assistant',
    'assist_intro': 'How can I help?',
    'assist_hint': 'Type a message...',
    'mode_expert': 'Expert',
    'mode_fast': 'Fast',
    'mode_switched': 'Mode switched to:',
    'feat_face': 'Face Recognition',
    'desc_face': 'Real-time identification',
    'feat_ocr': 'Text Scanning',
    'desc_ocr': 'Extract text from images',
    'feat_music': 'Aksara Music',
    'desc_music': 'Generate music with AI',
    'feat_obj': 'Object Detection',
    'desc_obj': 'Identify objects around',
    'feat_qr': 'QR Scanner',
    'desc_qr': 'Scan QR codes',
    'appearance': 'APPEARANCE',
    'dark_mode': 'Dark Mode',
    'font_style': 'Font Style',
    'font_size': 'Font Size',
    'system_data': 'SYSTEM & DATA',
    'clear_cache': 'Clear Cache',
    'cache_desc': 'Delete temp data',
    'cache_cleared': 'Cache cleared!',
    'app_version': 'App Version',
    'select_language': 'Select Language',
    'history_title': 'Activity History',
    'no_history': 'No activity yet',
    'scan_ocr': 'Text Scan (OCR)',
    'det_obj': 'Object Detection',
    'rec_face': 'Face Recognition',
    'chat_ai': 'Chatbot Assistant',
    'scan_qr': 'QR Code Scan',
    'login_act': 'User Login',
    'gen_music': 'AI Music Generation',
    'desc_act_assist': 'Chatting with AI',
    'desc_act_ocr': 'Image to text conversion',
    'desc_act_face': 'User face verification',
    'desc_act_obj': 'Visual object analysis',
    'desc_act_qr': 'Reading QR code',
    'desc_act_default': 'System activity',
  },
  'ja': {
    'hello': 'こんにちは、',
    'explore': '機能を探る',
    'home': 'ホーム',
    'history': '履歴',
    'profile': 'プロフィール',
    'settings': '設定',
    'about_app': 'アプリについて',
    'privacy': 'プライバシーポリシー',
    'language': '言語',
    'feedback': 'フィードバック',
    'logout': 'ログアウト',
    'delete_account': 'アカウント削除',
    'cancel': 'キャンセル',
    'save': '保存',
    'edit_name': '名前を変更',
    'name_hint': '新しい名前を入力',
    'notif_name_desc': '名前が更新されました',
    'notif_photo_desc': '写真が更新されました',
    'no_notif': '通知はありません',
    'assist_title': 'Aksara アシスタント',
    'assist_intro': 'お手伝いしますか？',
    'assist_hint': 'メッセージを入力...',
    'mode_expert': 'エキスパート',
    'mode_fast': '高速',
    'mode_switched': 'モード切替:',
    'feat_face': '顔認識',
    'desc_face': 'リアルタイム識別',
    'feat_ocr': 'テキストスキャン',
    'desc_ocr': '画像から文字抽出',
    'feat_music': 'Aksara 音楽',
    'desc_music': 'AIで音楽作成',
    'feat_obj': '物体検出',
    'desc_obj': '周囲の物体を識別',
    'feat_qr': 'QRスキャナー',
    'desc_qr': 'QRコードをスキャン',
    'appearance': '外観',
    'dark_mode': 'ダークモード',
    'font_style': 'フォントスタイル',
    'font_size': 'フォントサイズ',
    'system_data': 'システムとデータ',
    'clear_cache': 'キャッシュを消去',
    'cache_desc': '一時データを削除',
    'cache_cleared': 'キャッシュを消去しました！',
    'app_version': 'アプリ版',
    'select_language': '言語を選択',
    'history_title': 'アクティビティ履歴',
    'no_history': '活動なし',
    'scan_ocr': 'テキストスキャン (OCR)',
    'det_obj': '物体検出',
    'rec_face': '顔認識',
    'chat_ai': 'チャットボット',
    'scan_qr': 'QRコードスキャン',
    'login_act': 'ログイン',
    'gen_music': 'AI音楽生成',
    'desc_act_assist': 'AIとの会話',
    'desc_act_ocr': '画像からテキストへ',
    'desc_act_face': '顔認証',
    'desc_act_obj': '物体分析',
    'desc_act_qr': 'QR読み取り',
    'desc_act_default': 'システム活動',
  },
  'ko': {
    'hello': '안녕하세요,',
    'explore': '기능 탐색',
    'home': '홈',
    'history': '기록',
    'profile': '프로필',
    'settings': '설정',
    'about_app': '앱 정보',
    'privacy': '개인정보 정책',
    'language': '언어',
    'feedback': '피드백',
    'logout': '로그아웃',
    'delete_account': '계정 삭제',
    'cancel': '취소',
    'save': '저장',
    'edit_name': '이름 수정',
    'name_hint': '새 이름 입력',
    'notif_name_desc': '이름이 업데이트되었습니다',
    'notif_photo_desc': '사진이 업데이트되었습니다',
    'no_notif': '알림 없음',
    'assist_title': 'Aksara 어시스턴트',
    'assist_intro': '무엇을 도와드릴까요?',
    'assist_hint': '메시지 입력...',
    'mode_expert': '전문가',
    'mode_fast': '빠른',
    'mode_switched': '모드 전환:',
    'feat_face': '얼굴 인식',
    'desc_face': '실시간 식별',
    'feat_ocr': '텍스트 스캔',
    'desc_ocr': '이미지 텍스트 추출',
    'feat_music': 'Aksara 음악',
    'desc_music': 'AI 음악 생성',
    'feat_obj': '객체 감지',
    'desc_obj': '주변 물체 식별',
    'feat_qr': 'QR 스캐너',
    'desc_qr': 'QR 코드 스캔',
    'appearance': '모양',
    'dark_mode': '다크 모드',
    'font_style': '글꼴 스타일',
    'font_size': '글꼴 크기',
    'system_data': '시스템 및 데이터',
    'clear_cache': '캐시 지우기',
    'cache_desc': '임시 데이터 삭제',
    'cache_cleared': '캐시 삭제됨!',
    'app_version': '앱 버전',
    'select_language': '언어 선택',
    'history_title': '활동 내역',
    'no_history': '활동 없음',
    'scan_ocr': '텍스트 스캔 (OCR)',
    'det_obj': '객체 감지',
    'rec_face': '얼굴 인식',
    'chat_ai': '챗봇',
    'scan_qr': 'QR 코드 스캔',
    'login_act': '로그인',
    'gen_music': 'AI 음악 생성',
    'desc_act_assist': 'AI 대화',
    'desc_act_ocr': '이미지 텍스트 변환',
    'desc_act_face': '얼굴 확인',
    'desc_act_obj': '객체 분석',
    'desc_act_qr': 'QR 읽기',
    'desc_act_default': '시스템 활동',
  },
  'zh': {
    'hello': '你好，',
    'explore': '探索功能',
    'home': '主页',
    'history': '历史',
    'profile': '简介',
    'settings': '设置',
    'about_app': '关于应用',
    'privacy': '隐私政策',
    'language': '语言',
    'feedback': '反馈',
    'logout': '登出',
    'delete_account': '删除账户',
    'cancel': '取消',
    'save': '保存',
    'edit_name': '修改名称',
    'name_hint': '输入新名称',
    'notif_name_desc': '名称已更新',
    'notif_photo_desc': '照片已更新',
    'no_notif': '无通知',
    'assist_title': 'Aksara 助手',
    'assist_intro': '有什么可以帮你的？',
    'assist_hint': '输入消息...',
    'mode_expert': '专家',
    'mode_fast': '快速',
    'mode_switched': '模式切换至:',
    'feat_face': '人脸识别',
    'desc_face': '实时识别',
    'feat_ocr': '文本扫描',
    'desc_ocr': '从图像提取文本',
    'feat_music': 'Aksara 音乐',
    'desc_music': 'AI生成音乐',
    'feat_obj': '物体检测',
    'desc_obj': '识别周围物体',
    'feat_qr': 'QR 扫描仪',
    'desc_qr': '扫描二维码',
    'appearance': '外观',
    'dark_mode': '深色模式',
    'font_style': '字体样式',
    'font_size': '字体大小',
    'system_data': '系统与数据',
    'clear_cache': '清除缓存',
    'cache_desc': '删除临时数据',
    'cache_cleared': '缓存已清除！',
    'app_version': '应用版本',
    'select_language': '选择语言',
    'history_title': '活动历史',
    'no_history': '暂无活动',
    'scan_ocr': '文本扫描 (OCR)',
    'det_obj': '物体检测',
    'rec_face': '人脸识别',
    'chat_ai': '聊天机器人',
    'scan_qr': '扫描二维码',
    'login_act': '登录',
    'gen_music': 'AI音乐生成',
    'desc_act_assist': '与AI对话',
    'desc_act_ocr': '图像转文本',
    'desc_act_face': '面部验证',
    'desc_act_obj': '物体分析',
    'desc_act_qr': '读取二维码',
    'desc_act_default': '系统活动',
  },
};